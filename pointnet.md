##### PointNet整体网络结构较为清晰，下面对其进行简单梳理：
网络的前一部分学习的是感兴趣点，后面的全连接层作用是整合信息并进行分类或分割。通过实验发现，网络能够使用一些洗漱的关键点作为输入点云的描述，切这些点恰巧为目标图形的外形框架。
因此首先介绍点云的三点性质：</br>
1、无序性。点云是一组没有特定顺序的点，是一个集合，对数据的顺序是不敏感的。即模型需要对数据的不同排列保持不变性。</br>
作者使用max pooling来提取提取点云数据的特征。</br>
2、点与点之间的空间关系。该性质较好理解，一个物体是有特定空间中的一些点组成的，这个点之间存在着空间关系。模型需要能够学习到点周围的局部信息，以及局部信息之间的相互作用，这一点可以理解为图像中的上下文关系。</br>
作者将局部特征和全局特征进行串联的方式来聚合信息。</br>
3、刚性变换不变性。目标的点云数据应该对某些空间的变换具有不变性，简单来说如果对点云数据进行反转操作，网络对该点云的分类或是分割结果应当不变。
作者在提取特征前先对点云数据进行对齐，对齐的方式为训练一个小网络得到变换矩阵，并与输入点云数据进行相乘。
************************
#### 数据输入：
    点云数据（point clouds），n个点云数据，每个点云数据由三个坐标组成，也可以增加其他先验信息。
    由于点云不同点之间是独立的，使用一个空间转换网络对输入点云做regluization。
#### 网络输出：
    物体标签或者分割部分标签。
    分类问题：输出k个类别的k个概率。
    分割问题：输出所有n个点相较于m个类别（语义）的的概率，输出尺寸为（n x m）。
#### 网络结构：
    分类网络以n个点为输入，对其进行特征变换，然后通过max pooling的方法聚合点特征。输出是k个类的分类分数。
    分割网络将全局和局部特征以及每类分数的输出连接在一起。
#### 整体流程：
     1、输入为点云信息，表示为nx3的2维tensor。
     2、对输入数据通过一个小型网络做变换得到转换矩阵来对齐，是的模型对特定空间具有转换不变性。
     3、通过多次mlp对各点云数据进行特征提取后，再用一个T-Net对特征进行对齐。在特征的各个维度上执行max pooling来得到最终的全局特征。
     4、分类任务，将全局特征通过mlp来预测最后的分类分数。
     5、分割任务，将全局特征与点云局部特征拼接，在通过mlp得到每一个点的类别分数。
*****
所以网络有三个关键部分：</br>
得到全局特征的max pooling层</br>
局部信息与全局信息的融合</br>
两个对齐网络</br>

针对点云无序特点的对称函数，普遍来说有三种方法。一种为重新排序，一种为讲数据所有排列进行增强之后使用RNN模型，还有一种为使用对称函数保证排列不变性。</br>
文章指出，重新排序的方法，在高维空间中对于点扰动并不稳定。而使用RNN的想法将点集视为顺序信号，并希望通过用随机排列的序列训练RNN，数据的顺序将按照输入顺序固定不变，OrderMatters已经证明了顺序确实很重要，不能完全省略。虽然RNN对于长度较小(几十个)的序列的输入排序具有相对较好的鲁棒性，但很难扩展到数千个输入元素，而这是点集的常见大小。</br>
为了使结果不受输入排列顺序的影响，作者提出通过对集合中的元素应用对称函数来近似定义在点集上的一般函数：</br>
f({x1​,...,xn​})=g(h(x1​),...,h(xn​)) </br>
g是一个对称函数，用单变量函数和最大池化函数的组合来拟合。h用多层感知机网络（mlp）拟合，用于将点云数据映射到高维。

整个局部与全局信息，分类网络中输出的特征向量 [f1,...,fK]是全局特征向量，在计算出全局点云特征向量后，通过将全局特征与局部特征进行融合，这样新的点便可以知道全局与局部的特征了。
    
联合对齐网络，如果点云经过某些几何变换(如刚性变换)，点云的语义标签必须是不变的。因此，我们期望输出通过我们网络学习对于这些变换的表示不变。
通过一个微型网络（T-net）预测一个仿射变换矩阵，并将这个变换直接应用到输入点的坐标上。T-net本身类似于大网络，由点无关特征提取、最大集合和全连通三个基本模块组成。第一个T-net以原始点云为输入，回归为 3×3 矩阵的Mini-PointNet。由每个点上的共享MLP(64，128，1024)网络(层输出大小为64，128，1024)、跨点的最大池和两个输出大小为512，256的完全连接层组成。输出矩阵被初始化为单位矩阵。除最后一层外，所有层都包含重新生成和批处理规格化。第二个 T-net 除了输出为64×64矩阵外，网络结构与第一个相同。
特征空间的对齐问题。我们可以在点要素上插入另一个对齐网络，并预测一个特征转换矩阵来对齐来自不同输入点云的特征。然而，特征空间中的变换矩阵比空间变换矩阵的维数要高得多，极大地增加了优化的难度。因此，我们将正则化项添加到 Softmax 训练损失中。

